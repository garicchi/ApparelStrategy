rule,action
//initialize
{init}=[],{init}=[ok]&{j_st}=[0]&{status}=[q2]&{money}=[0]&{season}=[0]&{qr_data}=[null]&{s_u}=[]
//start
{u_u}=[.*試着.*]&{status}=[wait],{s_u}=[ポイントカードを見せてね]&{status}=[point_scan]&{s_u}=[picture]
{qr_data}![null]&{status}=[point_scan],{scan_point}=[{qr_data}]&{s_u}=[{current_user}さん、こんにちは。次に服を見せてね]&{status}=[cloth_scan]&{s_u}=[picture]
{qr_data}![null]&{status}=[cloth_scan],{scan_cloth}=[{qr_data}]&{s_u}=[{current_cloth}円だよ。まだ試着する服残ってる?]&{status}=[cloth_ask]
{u_u}=[.*ある.*]&{status}=[cloth_ask],{s_u}=[服を見せて]&{status}=[cloth_scan]&{s_u}=[picture]
{u_u}=[.*ない.*|.*無い.*|.*内容.*]&{status}=[cloth_ask],{end_cloth}=[]&{status}=[go_fit]&{s_u}=[hide]&{s_u}=[ありがとう。試着室へどうぞ。試着が終わったら声をかけてね]
//go fitting room
{status}=[q1|go_fit]&{u_u}=[.*着た.*|.*きた.*|.*終わった.*|.*おわ.*]&{is_osyare}=[false],{status}=[q2]&{s_u}=[normal]&{s_u}=[服の提案をしてもいいかな？]
{status}=[q1|go_fit]&{u_u}=[.*着た.*|.*きた.*|.*終わった.*|.*おわ.*]&{is_osyare}=[true],{status}=[q7]&{s_u}=[normal]&{s_u}=[すっごくオシャレだね！僕からおすすめの服を紹介する必要ある？]
{u_u}=![(.*店員.*呼.*|.*帰.*)]&{j_st}=![1|2]&{u_u}=![(.*はい.*|.*いいよ.*|.*おっけー.*|.*うん.*|.*提案.*|.*お願い.*|.*して.*|.*いや.*|.*やだ.*|.*駄目.*|.*大丈夫.*|.*嫌.*|.*しないで.*)]&{status}=[q2],{s_u}=[ごめん、言葉が難しくて分からなかった！服の提案をしてもいいかな？]
{j_st}=![1|2]&{u_u}=[(.*はい.*|.*おっけー.*|.*うん.*|.*提案.*|.*お願い.*|.*して.*)]&{status}=[q2|q7],{status}=[q3]&{s_u}=[ありがとう！いくつか質問させてね！予算って大体上限いくらくらいまで出せる？千円単位で教えて！]
{j_st}=![1|2]&{u_u}=[(.*いや.*|.*やだ.*|.*駄目.*|.*大丈夫.*|.*嫌.*|.*しないで.*|.*いいよ.*)]&{status}=[q2|q7],{status}=[qz]&{s_u}=[分かったよ！今日は来てくれてどうもありがとう！気をつけて帰ってね]
{u_u}=![(.*店員.*呼.*|.*帰.*)]&{j_st}=![1|2]&{u_u}=![(.*祭.*|.*パーティ.*|.*プール.*|.*ない.*)]&{status}=[q3],{s_u}=[ごめんね、ちょっと難しくて分からなかったかも…！予算は上限いくらまで出せる？千円単位で教えてね！]
{j_st}=![1|2]&{u_u}=![.*一万千円.*|.*二万千円.*|.*三万千円.*|.*四万千円.*]&{u_u}=[.*千円.*]&{status}=[q3],｛money｝=[千円]&{status}=[q4]&{s_u}=[そっか千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=![.*一万二千円.*|.*二万二千円.*|.*三万二千円.*|.*四万二千円.*]&{u_u}=[.*二千円.*]&{status}=[q3],｛money｝=[二千円]&{status}=[q4]&{s_u}=[そっか二千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=![.*一万三千円.*|.*二万三千円.*|.*三万三千円.*|.*四万三千円.*]&{u_u}=[.*三千円.*]&{status}=[q3],｛money｝=[三千円]&{status}=[q4]&{s_u}=[そっか三千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=![.*一万四千円.*|.*二万千円.*|.*三万四千円.*|.*四万四千円.*]&{u_u}=[.*四千円.*]&{status}=[q3],｛money｝=[四千円]&{status}=[q4]&{s_u}=[そっか四千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=![.*一万五千円.*|.*二万五千円.*|.*三万五千円.*|.*四万五千円.*]&{u_u}=[.*五千円.*]&{status}=[q3],｛money｝=[五千円]&{status}=[q4]&{s_u}=[そっか五千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=![.*一万六千円.*|.*二万六千円.*|.*三万六千円.*|.*四万六千円.*]&{u_u}=[.*六千円.*]&{status}=[q3],｛money｝=[六千円]&{status}=[q4]&{s_u}=[そっか六千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=![.*一万七千円.*|.*二万七千円.*|.*三万七千円.*|.*四万七千円.*]&{u_u}=[.*七千円.*]&{status}=[q3],｛money｝=[七千円]&{status}=[q4]&{s_u}=[そっか七千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=![.*一万八千円.*|.*二万八千円.*|.*三万八千円.*|.*四万八千円.*]&{u_u}=[.*八千円.*]&{status}=[q3],｛money｝=[八千円]&{status}=[q4]&{s_u}=[そっか八千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=![.*一万九千円.*|.*二万九千円.*|.*三万九千円.*|.*四万九千円.*]&{u_u}=[.*九千円.*]&{status}=[q3],｛money｝=[九千円]&{status}=[q4]&{s_u}=[そっか九千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*一万円.*]&{status}=[q3],｛money｝=[一万円]&{status}=[q4]&{s_u}=[そっか一万円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*一万千円.*]&{status}=[q3],｛money｝=[一万千円]&{status}=[q4]&{s_u}=[そっか一万千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*一万二千円.*]&{status}=[q3],｛money｝=[一万二千円]&{status}=[q4]&{s_u}=[そっか一万二千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*一万三千円.*]&{status}=[q3],｛money｝=[一万三千円]&{status}=[q4]&{s_u}=[そっか一万三千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*一万四千円.*]&{status}=[q3],｛money｝=[一万四千円]&{status}=[q4]&{s_u}=[そっか一万四千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*一万五千円.*]&{status}=[q3],｛money｝=[一万五千円]&{status}=[q4]&{s_u}=[そっか一万五千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*一万六千円.*]&{status}=[q3],｛money｝=[一万六千円]&{status}=[q4]&{s_u}=[そっか一万六千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*一万七千円.*]&{status}=[q3],｛money｝=[一万七千円]&{status}=[q4]&{s_u}=[そっか一万七千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*一万八千円.*]&{status}=[q3],｛money｝=[一万八千円]&{status}=[q4]&{s_u}=[そっか一万八千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*一万九千円.*]&{status}=[q3],｛money｝=[一万九千円]&{status}=[q4]&{s_u}=[そっか一万九千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*二万円.*]&{status}=[q3],｛money｝=[二万円]&{status}=[q4]&{s_u}=[そっか二万円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*二万千円.*]&{status}=[q3],｛money｝=[二万千円]&{status}=[q4]&{s_u}=[そっか二万千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*二万二千円.*]&{status}=[q3],｛money｝=[二万二千円]&{status}=[q4]&{s_u}=[そっか二万二千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*二万三千円.*]&{status}=[q3],｛money｝=[二万三千円]&{status}=[q4]&{s_u}=[そっか二万三千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*二万四千円.*]&{status}=[q3],｛money｝=[二万四千円]&{status}=[q4]&{s_u}=[そっか二万四千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*二万五千円.*]&{status}=[q3],｛money｝=[二万五千円]&{status}=[q4]&{s_u}=[そっか二万五千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*二万六千円.*]&{status}=[q3],｛money｝=[二万六千円]&{status}=[q4]&{s_u}=[そっか二万六千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*二万七千円.*]&{status}=[q3],｛money｝=[二万七千円]&{status}=[q4]&{s_u}=[そっか二万七千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*二万八千円.*]&{status}=[q3],｛money｝=[二万八千円]&{status}=[q4]&{s_u}=[そっか二万八千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*二万九千円.*]&{status}=[q3],｛money｝=[二万九千円]&{status}=[q4]&{s_u}=[そっか二万九千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*三万円.*]&{status}=[q3],｛money｝=[三万円]&{status}=[q4]&{s_u}=[そっか三万円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*三万千円.*]&{status}=[q3],｛money｝=[三万千円]&{status}=[q4]&{s_u}=[そっか三万千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*三万二千円.*]&{status}=[q3],｛money｝=[三万二千円]&{status}=[q4]&{s_u}=[そっか三万二千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*三万三千円.*]&{status}=[q3],｛money｝=[三万三千円]&{status}=[q4]&{s_u}=[そっか三万三千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*三万四千円.*]&{status}=[q3],｛money｝=[三万四千円]&{status}=[q4]&{s_u}=[そっか三万四千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*三万五千円.*]&{status}=[q3],｛money｝=[三万五千円]&{status}=[q4]&{s_u}=[そっか三万五千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*三万六千円.*]&{status}=[q3],｛money｝=[三万六千円]&{status}=[q4]&{s_u}=[そっか三万六千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*三万七千円.*]&{status}=[q3],｛money｝=[三万七千円]&{status}=[q4]&{s_u}=[そっか三万七千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*三万八千円.*]&{status}=[q3],｛money｝=[三万八千円]&{status}=[q4]&{s_u}=[そっか三万八千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*三万九千円.*]&{status}=[q3],｛money｝=[三万九千円]&{status}=[q4]&{s_u}=[そっか三万九千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*四万円.*]&{status}=[q3],｛money｝=[三万九千円]&{status}=[q4]&{s_u}=[そっか三万九千円だね！もう少し質問させてね、どういう時期の服が欲しいの？]
{u_u}=![(.*店員.*呼.*|.*帰.*)]&{u_u}=![.*帰.*]&{j_st}=![1|2]&{u_u}=![.*春.*|.*夏.*|.*秋.*|.*冬.*|.*わかんない.*]&{status}=[q4],{s_u}=[ごめんね、その時期は登録されて無いみたい！他の時期を教えてね！]
{j_st}=![1|2]&{u_u}=[.*春.*]&{status}=[q4],｛season｝=[春]&{status}=[q5]&{s_u}=[わかったよー！今お勧めの服を探すね！]
{j_st}=![1|2]&{u_u}=[.*夏.*]&{status}=[q4],｛season｝=[夏]&{status}=[q5]&{s_u}=[わかったよー！今お勧めの服を探すね！]
{j_st}=![1|2]&{u_u}=[.*秋.*]&{status}=[q4],｛season｝=[秋]&{status}=[q5]&{s_u}=[わかったよー！今お勧めの服を探すね！]
{j_st}=![1|2]&{u_u}=[.*冬.*]&{status}=[q4],｛season｝=[冬]&{status}=[q5]&{s_u}=[わかったよー！今お勧めの服を探すね！]
{j_st}=![1|2]&{u_u}=[.*ない.*]&{status}=[q4],｛season｝=[null]&{status}=[q5]&{s_u}=[そっか特に決めてないんだね！今お勧めの服を探すね！]
{j_st}=![1|2]&{u_u}=[q5],{s_u}=[服を探して見たよ！この服とかどうかなあ？]
{u_u}=![(.*店員.*呼.*|.*帰.*)]&{j_st}=![1|2]&{u_u}=![(.*はい.*|.*おっけー.*|.*うん.*|.*好き.*|.*提案.*|.*お願い.*|.*して.*|.*気に入.*|.*いや.*|.*やだ.*|.*駄目.*|.*違う.*|.*嫌.*|.*しないで.*|.*好きじゃない.*|.*いいね.*)]&{status}=[q5],{s_u}=[ごめん、言葉が難しかったみたい…！もう一回教えて！この服はどうかな？]
{j_st}=![1|2]&{u_u}=[(.*はい.*|.*おっけー.*|.*うん.*|.*好き.*|.*提案.*|.*お願い.*|.*して.*|.*気に入.*|.*いいね.*)]&{status}=[q5],{status}=[qz]&{s_u}=[やったー！気に入ってくれてうれしいよ！それじゃあ案内はこれで終わるね、また来てね！]
{j_st}=![1|2]&{u_u}=[(.*いや.*|.*やだ.*|.*駄目.*|.*違う.*|.*嫌.*|.*しないで.*|.*好きじゃない.*)]&{status}=[q5],{status}=[q6]&{s_u}=[ああ、そっかー、じゃあこれはどうかな…]
{j_st}=![1|2]&{u_u}=[.*店員.*呼.*],{status_ren}=[{status}]&{status}=[qa]&{s_u}=[店員さんを呼びますか？]&{j_st}=[1]
{j_st}=[1]&{u_u}=![(.*はい.*|.*いいよ.*|.*おっけー.*|.*うん.*|.*提案.*|.*お願い.*|.*呼んで.*|.*して.*|.*いや.*|.*やだ.*|.*駄目.*|.*大丈夫.*|.*嫌.*|.*しないで.*)]&{status}=[qa],{s_u}=[ごめん、言葉が難しくて分からなかった！もう少し簡単な言葉で言ってもらってもいいかな？店員さん呼ぶ？]
{j_st}=[1]&{u_u}=[(.*はい.*|.*いいよ.*|.*おっけー.*|.*うん.*|.*提案.*|.*お願い.*|.*して.*|.*呼んで.*)]&{status}=[qa],{status}=[qz]&{s_u}=[わかったよ！店員さんを呼ぶからちょっと待っててねー！]&{j_st}=[0]
{j_st}=[1]&{u_u}=[(.*いや.*|.*やだ.*|.*駄目.*|.*大丈夫.*|.*嫌.*|.*しないで.*)]&{status}=[qa],{status}=[{status_ren}]&{s_u}=[分かったよ！会話に戻るね！]&{j_st}=[0]
{j_st}=![1|2]&{u_u}=[.*帰.*],{status_ren}=[{status}]&{status}=[qb]&{s_u}=[あ、もう会話をやめて帰るー？]&{j_st}=[2]
{j_st}=[2]&{u_u}=![(.*はい.*|.*いいよ.*|.*おっけー.*|.*うん.*|.*提案.*|.*帰る.*|.*お願い.*|.*呼んで.*|.*して.*|.*いや.*|.*やだ.*|.*駄目.*|.*大丈夫.*|.*嫌.*|.*しないで.*)]&{status}=[qb],{s_u}=[ごめん、言葉が難しくて分からなかった！もう帰るー？]
{j_st}=[2]&{u_u}=[(.*はい.*|.*いいよ.*|.*おっけー.*|.*うん.*|.*提案.*|.*お願い.*|.*して.*|.*呼んで.*|.*帰る.*)]&{status}=[qb],{status}=[qz]&{s_u}=[わかったよ！今日はきてくれてどうもありがとう！気をつけて帰ってね！]&{j_st}=[0]
{j_st}=[2]&{u_u}=[(.*いや.*|.*やだ.*|.*駄目.*|.*大丈夫.*|.*嫌.*|.*しないで.*|.*帰らない.*)]&{status}=[qb],{status}=[{status_ren}]&{s_u}=[分かったよ！会話に戻るね！]&{j_st}=[0]
{status}=[qz],{s_u}=[終わり]