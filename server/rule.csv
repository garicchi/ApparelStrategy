rule,action
//initialize
{init}=[],{init}=[ok]&{j_st}=[0]&{status}=[q2]&{location}=[0]&{season}=[0]&{qr_data}=[null]&{s_u}=[]
//start
{u_u}=[.*試着.*]&{status}=[wait],{s_u}=[ポイントカードを見せてね]&{status}=[point_scan]&{s_u}=[picture]
{qr_data}![null]&{status}=[point_scan],{scan_point}=[{qr_data}]&{s_u}=[{current_user}さん、こんにちは。次に服を見せてね]&{status}=[cloth_scan]&{s_u}=[picture]
{qr_data}![null]&{status}=[cloth_scan],{scan_cloth}=[{qr_data}]&{s_u}=[{current_cloth}円だよ。まだ試着する服残ってる?]&{status}=[cloth_ask]
{u_u}=[.*ある.*]&{status}=[cloth_ask],{s_u}=[服を見せて]&{status}=[cloth_scan]&{s_u}=[picture]
{u_u}=[.*ない.*|.*無い.*|.*内容.*]&{status}=[cloth_ask],{end_cloth}=[]&{status}=[go_fit]&{s_u}=[hide]&{s_u}=[ありがとう。試着室へどうぞ。試着が終わったら声をかけてね]
//go fitting room
{status}=[q1|go_fit]&{u_u}=[.*着た.*|.*きた.*|.*終わった.*|.*おわ.*]&{is_osyare}=[false],{status}=[q2]&{s_u}=[color]&{s_u}=[服の提案をしてもいいかな？]
{status}=[q1|go_fit]&{u_u}=[.*着た.*|.*きた.*|.*終わった.*|.*おわ.*]&{is_osyare}=[true],{status}=[q7]&{s_u}=[color]&{s_u}=[すっごくオシャレだね！僕からおすすめの服を紹介する必要ある？]
{u_u}=![(.*店員.*呼.*|.*帰.*)]&{j_st}=![1|2]&{u_u}=![(.*はい.*|.*いいよ.*|.*おっけー.*|.*うん.*|.*提案.*|.*お願い.*|.*して.*|.*いや.*|.*やだ.*|.*駄目.*|.*大丈夫.*|.*嫌.*|.*しないで.*)]&{status}=[q2],{s_u}=[ごめん、言葉が難しくて分からなかった！服の提案をしてもいいかな？]
{j_st}=![1|2]&{u_u}=[(.*はい.*|.*おっけー.*|.*うん.*|.*提案.*|.*お願い.*|.*して.*)]&{status}=[q2|q7],{status}=[q3]&{s_u}=[ありがとう！いくつか質問させてね！どういうところに来て行く為の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[(.*いや.*|.*やだ.*|.*駄目.*|.*大丈夫.*|.*嫌.*|.*しないで.*|.*いいよ.*)]&{status}=[q2|q7],{status}=[qz]&{s_u}=[分かったよ！今日は来てくれてどうもありがとう！気をつけて帰ってね]
{u_u}=![(.*店員.*呼.*|.*帰.*)]&{j_st}=![1|2]&{u_u}=![(.*祭.*|.*パーティ.*|.*プール.*|.*ない.*)]&{status}=[q3],{s_u}=[ごめんね、その場所は登録されてないみたい！他の場所は無いかな？]
{j_st}=![1|2]&{u_u}=[.*祭.*]&{status}=[q3],｛locate｝=[祭]&{status}=[q4]&{s_u}=[そっかお祭りだね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*パーティ.*]&{status}=[q3],｛locate｝=[パーティー]&{status}=[q4]&{s_u}=[そっかパーティーだね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*プール.*]&{status}=[q3],｛locate｝=[プール]&{status}=[q4]&{s_u}=[そっかプールだね！もう少し質問させてね、どういう時期の服が欲しいの？]
{j_st}=![1|2]&{u_u}=[.*ない.*]&{status}=[q3],｛locate｝=[null]&{status}=[q4]&{s_u}=[そっか特に決めてないんだね！もう少し質問させてね、どういう時期の服が欲しいの？]
{u_u}=![(.*店員.*呼.*|.*帰.*)]&{u_u}=![.*帰.*]&{j_st}=![1|2]&{u_u}=![.*春.*|.*夏.*|.*秋.*|.*冬.*|.*わかんない.*]&{status}=[q4],{s_u}=[ごめんね、その時期は登録されて無いみたい！他の時期を教えてね！]
{j_st}=![1|2]&{u_u}=[.*春.*]&{status}=[q4],｛season｝=[春]&{status}=[q5]&{s_u}=[わかったよー！今お勧めの服を探すね！]
{j_st}=![1|2]&{u_u}=[.*夏.*]&{status}=[q4],｛season｝=[夏]&{status}=[q5]&{s_u}=[わかったよー！今お勧めの服を探すね！]
{j_st}=![1|2]&{u_u}=[.*秋.*]&{status}=[q4],｛season｝=[秋]&{status}=[q5]&{s_u}=[わかったよー！今お勧めの服を探すね！]
{j_st}=![1|2]&{u_u}=[.*冬.*]&{status}=[q4],｛season｝=[冬]&{status}=[q5]&{s_u}=[わかったよー！今お勧めの服を探すね！]
{j_st}=![1|2]&{u_u}=[.*ない.*]&{status}=[q4],｛season｝=[null]&{status}=[q5]&{s_u}=[そっか特に決めてないんだね！今お勧めの服を探すね！]
{j_st}=![1|2]&{u_u}=[q5],{s_u}=[服を探して見たよ！この服とかどうかなあ？]
{u_u}=![(.*店員.*呼.*|.*帰.*)]&{j_st}=![1|2]&{u_u}=![(.*はい.*|.*おっけー.*|.*うん.*|.*好き.*|.*提案.*|.*お願い.*|.*して.*|.*気に入.*|.*いや.*|.*やだ.*|.*駄目.*|.*違う.*|.*嫌.*|.*しないで.*|.*好きじゃない.*)]&{status}=[q5],{s_u}=[ごめん、言葉が難しかったみたい…！もう一回教えて！この服はどうかな？]
{j_st}=![1|2]&{u_u}=[(.*はい.*|.*おっけー.*|.*うん.*|.*好き.*|.*提案.*|.*お願い.*|.*して.*|.*気に入.*)]&{status}=[q5],{status}=[qz]&{s_u}=[やったー！気に入ってくれてうれしいよ！それじゃあ案内はこれで終わるね、また来てね！]
{j_st}=![1|2]&{u_u}=[(.*いや.*|.*やだ.*|.*駄目.*|.*違う.*|.*嫌.*|.*しないで.*|.*好きじゃない.*)]&{status}=[q5],{status}=[q6]&{s_u}=[ああ、そっかー、じゃあこれはどうかな…]
{j_st}=![1|2]&{u_u}=[.*店員.*呼.*],{status_ren}=[{status}]&{status}=[qa]&{s_u}=[店員さんを呼びますか？]&{j_st}=[1]
{j_st}=[1]&{u_u}=![(.*はい.*|.*いいよ.*|.*おっけー.*|.*うん.*|.*提案.*|.*お願い.*|.*呼んで.*|.*して.*|.*いや.*|.*やだ.*|.*駄目.*|.*大丈夫.*|.*嫌.*|.*しないで.*)]&{status}=[qa],{s_u}=[ごめん、言葉が難しくて分からなかった！もう少し簡単な言葉で言ってもらってもいいかな？店員さん呼ぶ？]
{j_st}=[1]&{u_u}=[(.*はい.*|.*いいよ.*|.*おっけー.*|.*うん.*|.*提案.*|.*お願い.*|.*して.*|.*呼んで.*)]&{status}=[qa],{status}=[qz]&{s_u}=[わかったよ！店員さんを呼ぶからちょっと待っててねー！]&{j_st}=[0]
{j_st}=[1]&{u_u}=[(.*いや.*|.*やだ.*|.*駄目.*|.*大丈夫.*|.*嫌.*|.*しないで.*)]&{status}=[qa],{status}=[{status_ren}]&{s_u}=[分かったよ！会話に戻るね！]&{j_st}=[0]
{j_st}=![1|2]&{u_u}=[.*帰.*],{status_ren}=[{status}]&{status}=[qb]&{s_u}=[あ、もう会話をやめて帰るー？]&{j_st}=[2]
{j_st}=[2]&{u_u}=![(.*はい.*|.*いいよ.*|.*おっけー.*|.*うん.*|.*提案.*|.*帰る.*|.*お願い.*|.*呼んで.*|.*して.*|.*いや.*|.*やだ.*|.*駄目.*|.*大丈夫.*|.*嫌.*|.*しないで.*)]&{status}=[qb],{s_u}=[ごめん、言葉が難しくて分からなかった！もう帰るー？]
{j_st}=[2]&{u_u}=[(.*はい.*|.*いいよ.*|.*おっけー.*|.*うん.*|.*提案.*|.*お願い.*|.*して.*|.*呼んで.*|.*帰る.*)]&{status}=[qb],{status}=[qz]&{s_u}=[わかったよ！今日はきてくれてどうもありがとう！気をつけて帰ってね！]&{j_st}=[0]
{j_st}=[2]&{u_u}=[(.*いや.*|.*やだ.*|.*駄目.*|.*大丈夫.*|.*嫌.*|.*しないで.*|.*帰らない.*)]&{status}=[qb],{status}=[{status_ren}]&{s_u}=[分かったよ！会話に戻るね！]&{j_st}=[0]
{status}=[qz],{s_u}=[終わり]